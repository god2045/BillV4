{"version":3,"file":"qiun-data-charts.js","sources":["uni_modules/qiun-data-charts(uni_modules)/components/qiun-data-charts/qiun-data-charts.vue","../../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvMTA0NTkvRGVza3RvcC9CaWxsVjQvQmlsbFY0L3VuaV9tb2R1bGVzL3FpdW4tZGF0YS1jaGFydHModW5pX21vZHVsZXMpL2NvbXBvbmVudHMvcWl1bi1kYXRhLWNoYXJ0cy9xaXVuLWRhdGEtY2hhcnRzLnZ1ZQ"],"sourcesContent":["<!-- \n * qiun-data-charts 秋云高性能跨全端图表组件\n * Copyright (c) 2021 QIUN® 秋云 https://www.ucharts.cn All rights reserved.\n * Licensed ( http://www.apache.org/licenses/LICENSE-2.0 )\n * 复制使用请保留本段注释，感谢支持开源！\n * 为方便更多开发者使用，如有更好的建议请提交码云 Pull Requests ！\n *\n * uCharts®官方网站\n * https://www.uCharts.cn\n * \n * 开源地址:\n * https://gitee.com/uCharts/uCharts\n * \n * uni-app插件市场地址：\n * http://ext.dcloud.net.cn/plugin?id=271\n * \n -->\n<template>\n  <view class=\"chartsview\" :id=\"'ChartBoxId'+cid\">\n    <view v-if=\"mixinDatacomLoading\">\n      <!-- 自定义加载状态，请改这里 -->\n      <qiun-loading :loadingType=\"loadingType\" />\n    </view>\n    <view v-if=\"mixinDatacomErrorMessage && errorShow\" @tap=\"reloading\">\n      <!-- 自定义错误提示，请改这里 -->\n      <qiun-error :errorMessage=\"errorMessage\" />\n    </view>\n    <!-- APP和H5采用renderjs渲染图表 -->\n    <!-- #ifdef APP-VUE || H5 -->\n    <block v-if=\"echarts\">\n      <view\n        :style=\"{ background: background }\"\n        style=\"width: 100%;height: 100%;\"\n        :data-directory=\"directory\"\n        :id=\"'EC'+cid\" \n        :prop=\"echartsOpts\" \n        :change:prop=\"rdcharts.ecinit\" \n        :resize=\"echartsResize\"\n        :change:resize=\"rdcharts.ecresize\"\n        v-show=\"showchart\"\n      />\n    </block>\n    <block v-else>\n      <view\n        v-on:tap=\"rdcharts.tap\"\n        v-on:mousemove=\"rdcharts.mouseMove\"\n        v-on:mousedown=\"rdcharts.mouseDown\"\n        v-on:mouseup=\"rdcharts.mouseUp\"\n        v-on:touchstart=\"rdcharts.touchStart\"\n        v-on:touchmove=\"rdcharts.touchMove\"\n        v-on:touchend=\"rdcharts.touchEnd\"\n        :id=\"'UC'+cid\"\n        :prop=\"uchartsOpts\"\n        :change:prop=\"rdcharts.ucinit\"\n      >\n        <canvas\n          :id=\"cid\"\n          :canvasId=\"cid\"\n          :style=\"{ width: cWidth + 'px', height: cHeight + 'px', background: background }\"\n          :disable-scroll=\"disableScroll\"\n          @error=\"_error\"\n          v-show=\"showchart\"\n        />\n      </view>\n    </block>\n    <!-- #endif -->\n    <!-- 支付宝小程序 -->\n    <!-- #ifdef MP-ALIPAY -->\n    <block v-if=\"ontouch\">\n      <canvas\n        :id=\"cid\"\n        :canvasId=\"cid\"\n        :width=\"cWidth * pixel\"\n        :height=\"cHeight * pixel\"\n        :style=\"{ width: cWidth + 'px', height: cHeight + 'px', background: background }\"\n        :disable-scroll=\"disScroll\"\n        @tap=\"_tap\"\n        @touchstart=\"_touchStart\"\n        @touchmove=\"_touchMove\"\n        @touchend=\"_touchEnd\"\n        @error=\"_error\"\n        v-show=\"showchart\"\n      />\n    </block>\n    <block v-if=\"!ontouch\">\n      <canvas\n        :id=\"cid\"\n        :canvasId=\"cid\"\n        :width=\"cWidth * pixel\"\n        :height=\"cHeight * pixel\"\n        :style=\"{ width: cWidth + 'px', height: cHeight + 'px', background: background }\"\n        :disable-scroll=\"disScroll\"\n        @tap=\"_tap\"\n        @error=\"_error\"\n        v-show=\"showchart\"\n      />\n    </block>\n    <!-- #endif -->\n    <!-- 其他小程序通过vue渲染图表 -->\n    <!-- #ifdef MP-WEIXIN || MP-BAIDU || MP-QQ || MP-TOUTIAO || MP-KUAISHOU || MP-LARK || MP-JD || MP-360 -->\n    <block v-if=\"type2d\">\n      <view v-if=\"ontouch\" @tap=\"_tap\">\n        <canvas\n          :id=\"cid\"\n          :canvasId=\"cid\"\n          :style=\"{ width: cWidth + 'px', height: cHeight + 'px', background: background }\"\n          type=\"2d\"\n          :disable-scroll=\"disScroll\"\n          @touchstart=\"_touchStart\"\n          @touchmove=\"_touchMove\"\n          @touchend=\"_touchEnd\"\n          @error=\"_error\"\n          v-show=\"showchart\"\n        />\n      </view>\n      <view v-if=\"!ontouch\" @tap=\"_tap\">\n        <canvas\n          :id=\"cid\"\n          :canvasId=\"cid\"\n          :style=\"{ width: cWidth + 'px', height: cHeight + 'px', background: background }\"\n          type=\"2d\"\n          :disable-scroll=\"disScroll\"\n          @error=\"_error\"\n          v-show=\"showchart\"\n        />\n      </view>\n    </block>\n    <block v-if=\"!type2d\">\n      <view v-if=\"ontouch\" @tap=\"_tap\">\n        <canvas\n          :id=\"cid\"\n          :canvasId=\"cid\"\n          :style=\"{ width: cWidth + 'px', height: cHeight + 'px', background: background }\"\n          @touchstart=\"_touchStart\"\n          @touchmove=\"_touchMove\"\n          @touchend=\"_touchEnd\"\n          :disable-scroll=\"disScroll\"\n          @error=\"_error\"\n          v-if=\"showchart\"\n        />\n      </view>\n      <view v-if=\"!ontouch\" >\n        <canvas\n          :id=\"cid\"\n          :canvasId=\"cid\"\n          :style=\"{ width: cWidth + 'px', height: cHeight + 'px', background: background }\"\n          :disable-scroll=\"disScroll\"\n          @tap=\"_tap\"\n          @error=\"_error\"\n          v-if=\"showchart\"\n        />\n      </view>\n    </block>\n    <!-- #endif -->\n  </view>\n</template>\n\n<script>\nimport uCharts from '../../js_sdk/u-charts/u-charts.js';\nimport cfu from '../../js_sdk/u-charts/config-ucharts.js';\n// #ifdef APP-VUE || H5\nimport cfe from '../../js_sdk/u-charts/config-echarts.js';\n// #endif\n\nfunction deepCloneAssign(origin = {}, ...args) {\n  for (let i in args) {\n    for (let key in args[i]) {\n      if (args[i].hasOwnProperty(key)) {\n        origin[key] = args[i][key] && typeof args[i][key] === 'object' ? deepCloneAssign(Array.isArray(args[i][key]) ? [] : {}, origin[key], args[i][key]) : args[i][key];\n      }\n    }\n  }\n  return origin;\n}\n\nfunction formatterAssign(args,formatter) {\n  for (let key in args) {\n    if(args.hasOwnProperty(key) && args[key] !== null && typeof args[key] === 'object'){\n      formatterAssign(args[key],formatter)\n    }else if(key === 'format' && typeof args[key] === 'string'){\n      args['formatter'] = formatter[args[key]] ? formatter[args[key]] : undefined;\n    }\n  }\n  return args;\n}\n\n// 时间转换函数，为了匹配uniClinetDB读取出的时间与categories不同\nfunction getFormatDate(date) {\n\tvar seperator = \"-\";\n\tvar year = date.getFullYear();\n\tvar month = date.getMonth() + 1;\n\tvar strDate = date.getDate();\n\tif (month >= 1 && month <= 9) {\n\t\t\tmonth = \"0\" + month;\n\t}\n\tif (strDate >= 0 && strDate <= 9) {\n\t\t\tstrDate = \"0\" + strDate;\n\t}\n\tvar currentdate = year + seperator + month + seperator + strDate;\n\treturn currentdate;\n}\n\nvar lastMoveTime = null;\n/**\n * 防抖\n *\n * @param { Function } fn 要执行的方法\n * @param { Number } wait  防抖多少毫秒\n *\n * 在 vue 中使用（注意：不能使用箭头函数，否则this指向不对，并且不能再次封装如：\n * move(){  // 错误调用方式\n *   debounce(function () {\n *   console.log(this.title);\n * }, 1000)}）;\n * 应该直接使用：// 正确调用方式\n * move: debounce(function () {\n *   console.log(this.title);\n * }, 1000)\n */\nfunction debounce(fn, wait) {\n  let timer = false;\n  return function() {\n    clearTimeout(timer);\n    timer && clearTimeout(timer);\n    timer = setTimeout(() => {\n      timer = false;\n      fn.apply(this, arguments); // 把参数传进去\n    }, wait);\n  };\n}\n\nexport default {\n  name: 'qiun-data-charts',\n  mixins: [uniCloud.mixinDatacom],\n  props: {\n    type: {\n      type: String,\n      default: null\n    },\n    canvasId: {\n      type: String,\n      default: 'uchartsid'\n    },\n    canvas2d: {\n      type: Boolean,\n      default: false\n    },\n    background: {\n      type: String,\n      default: 'rgba(0,0,0,0)'\n    },\n    animation: {\n      type: Boolean,\n      default: true\n    },\n    chartData: {\n      type: Object,\n      default() {\n        return {\n          categories: [],\n          series: []\n        };\n      }\n    },\n    opts: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    eopts: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    loadingType: {\n      type: Number,\n      default: 2\n    },\n    errorShow: {\n      type: Boolean,\n      default: true\n    },\n    errorReload: {\n      type: Boolean,\n      default: true\n    },\n    errorMessage: {\n      type: String,\n      default: null\n    },\n    inScrollView: {\n      type: Boolean,\n      default: false\n    },\n    reshow: {\n      type: Boolean,\n      default: false\n    },\n    reload: {\n      type: Boolean,\n      default: false\n    },\n    disableScroll: {\n      type: Boolean,\n      default: false\n    },\n    optsWatch: {\n      type: Boolean,\n      default: true\n    },\n    onzoom: {\n      type: Boolean,\n      default: false\n    },\n    ontap: {\n      type: Boolean,\n      default: true\n    },\n    ontouch: {\n      type: Boolean,\n      default: false\n    },\n    onmouse: {\n      type: Boolean,\n      default: true\n    },\n    onmovetip: {\n      type: Boolean,\n      default: false\n    },\n    echartsH5: {\n      type: Boolean,\n      default: false\n    },\n    echartsApp: {\n      type: Boolean,\n      default: false\n    },\n    tooltipShow: {\n      type: Boolean,\n      default: true\n    },\n    tooltipFormat: {\n      type: String,\n      default: undefined\n    },\n    tooltipCustom: {\n      type: Object,\n      default: undefined\n    },\n    startDate: {\n      type: String,\n      default: undefined\n    },\n    endDate: {\n      type: String,\n      default: undefined\n    },\n    textEnum: {\n      type: Array,\n      default () {\n        return []\n      }\n    },\n    groupEnum: {\n      type: Array,\n      default () {\n        return []\n      }\n    },\n    pageScrollTop: {\n      type: Number,\n      default: 0\n    },\n    directory: {\n      type: String,\n      default: '/'\n    },\n    tapLegend: {\n      type: Boolean,\n      default: true\n    },\n    menus: {\n      type: Array,\n      default () {\n        return []\n      }\n    }\n  },\n  data() {\n    return {\n      cid: 'uchartsid',\n      inWx: false,\n      inAli: false,\n      inTt: false,\n      inBd: false,\n      inH5: false,\n      inApp: false,\n      inWin: false,\n      type2d: true,\n      disScroll: false,\n      openmouse: false,\n      pixel: 1,\n      cWidth: 375,\n      cHeight: 250,\n      showchart: false,\n      echarts: false,\n      echartsResize:{\n        state:false\n      },\n      uchartsOpts: {},\n      echartsOpts: {},\n      drawData:{},\n      lastDrawTime:null,\n    };\n  },\n  created(){\n    this.cid = this.canvasId\n    if (this.canvasId == 'uchartsid' || this.canvasId == '') {\n      let t = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'\n      let len = t.length\n      let id = ''\n      for (let i = 0; i < 32; i++) {\n        id += t.charAt(Math.floor(Math.random() * len))\n      }\n      this.cid = id\n    }\n    const systemInfo = uni.getSystemInfoSync()\n    if(systemInfo.platform === 'windows' || systemInfo.platform === 'macos'){\n      this.inWin = true;\n    }\n    // #ifdef MP-WEIXIN\n    this.inWx = true;\n    if (this.canvas2d === false || systemInfo.platform === 'windows' || systemInfo.platform === 'macos') {\n      this.type2d = false;\n    }else{\n      this.type2d = true;\n      this.pixel = systemInfo.pixelRatio;\n    }\n    // #endif\n    //非微信小程序端强制关闭canvas2d模式\n    // #ifndef MP-WEIXIN\n    this.type2d = false;\n    // #endif\n    // #ifdef  MP-TOUTIAO || MP-LARK || MP-ALIPAY\n    this.type2d = this.canvas2d;\n    if(this.canvas2d === true){\n      this.pixel = systemInfo.pixelRatio;\n    }\n    // #endif\n    // #ifdef MP-ALIPAY\n    this.inAli = true;\n    this.pixel = systemInfo.pixelRatio;\n    // #endif\n    // #ifdef MP-BAIDU\n    this.inBd = true;\n    // #endif\n    // #ifdef MP-TOUTIAO\n    this.inTt = true;\n    // #endif\n    this.disScroll = this.disableScroll;\n  },\n  mounted() {\n    // #ifdef APP-VUE\n    this.inApp = true;\n    if (this.echartsApp === true) {\n      this.echarts = true;\n      this.openmouse = false;\n    }\n    // #endif\n    // #ifdef APP-NVUE\n    this.inApp = true;\n    this.mixinDatacomLoading = false\n    this.mixinDatacomErrorMessage = \"暂不支持NVUE\"\n    // #endif\n    // #ifdef H5\n    this.inH5 = true;\n    if(this.inWin === true){\n      this.openmouse = this.onmouse;\n    }\n    if (this.echartsH5 === true) {\n      this.echarts = true;\n    }\n    // #endif\n    this.$nextTick(()=>{\n      this.beforeInit();\n    })\n    // #ifndef MP-ALIPAY || MP-BAIDU || MP-TOUTIAO || APP-VUE\n    const time = this.inH5 ? 500 : 200;\n    const _this = this;\n    uni.onWindowResize(\n      debounce(function(res) {\n        if (_this.mixinDatacomLoading == true) {\n          return;\n        }\n        let errmsg = _this.mixinDatacomErrorMessage;\n        if (errmsg !== null && errmsg !== 'null' && errmsg !== '') {\n          return;\n        }\n        if (_this.echarts) {\n          _this.echartsResize.state = !_this.echartsResize.state;\n        } else {\n          _this.resizeHandler();\n        }\n      }, time)\n    );\n    // #endif\n  },\n  destroyed(){\n    if(this.echarts === true){\n      delete cfe.option[this.cid]\n      delete cfe.instance[this.cid]\n    }else{\n      delete cfu.option[this.cid]\n      delete cfu.instance[this.cid]\n    }\n    // #ifndef MP-ALIPAY || MP-BAIDU || MP-TOUTIAO\n    uni.offWindowResize(()=>{})\n    // #endif\n  },\n  watch: {\n    chartDataProps: {\n      handler(val, oldval) {\n        if (typeof val === 'object') {\n          if (JSON.stringify(val) !== JSON.stringify(oldval)) {\n            this._clearChart();\n            if (val.series && val.series.length > 0) {\n              this.beforeInit();\n            }else{\n              this.mixinDatacomLoading = true;\n              this.showchart = false;\n              this.mixinDatacomErrorMessage = null;\n            }\n          }\n        } else {\n          this.mixinDatacomLoading = false;\n          this._clearChart();\n          this.showchart = false;\n          this.mixinDatacomErrorMessage = '参数错误：chartData数据类型错误';\n        }\n      },\n      immediate: false,\n      deep: true\n    },\n    localdata:{\n      handler(val, oldval) {\n        if (JSON.stringify(val) !== JSON.stringify(oldval)) {\n          if (val.length > 0) {\n            this.beforeInit();\n          }else{\n            this.mixinDatacomLoading = true;\n            this._clearChart();\n            this.showchart = false;\n            this.mixinDatacomErrorMessage = null;\n          }\n        }\n      },\n      immediate: false,\n      deep: true\n    },\n    optsProps: {\n      handler(val, oldval) {\n        if (typeof val === 'object') {\n          if (JSON.stringify(val) !== JSON.stringify(oldval) && this.echarts === false && this.optsWatch == true) {\n            this.checkData(this.drawData);\n          }\n        } else {\n          this.mixinDatacomLoading = false;\n          this._clearChart();\n          this.showchart = false;\n          this.mixinDatacomErrorMessage = '参数错误：opts数据类型错误';\n        }\n      },\n      immediate: false,\n      deep: true\n    },\n    eoptsProps: {\n      handler(val, oldval) {\n        if (typeof val === 'object') {\n          if (JSON.stringify(val) !== JSON.stringify(oldval) && this.echarts === true) {\n            this.checkData(this.drawData);\n          }\n        } else {\n          this.mixinDatacomLoading = false;\n          this.showchart = false;\n          this.mixinDatacomErrorMessage = '参数错误：eopts数据类型错误';\n        }\n      },\n      immediate: false,\n      deep: true\n    },\n    reshow(val, oldval) {\n      if (val === true && this.mixinDatacomLoading === false) {\n        setTimeout(() => {\n          this.mixinDatacomErrorMessage = null;\n          this.echartsResize.state = !this.echartsResize.state;\n          this.checkData(this.drawData);\n        }, 200);\n      }\n    },\n    reload(val, oldval) {\n      if (val === true) {\n        this.showchart = false;\n        this.mixinDatacomErrorMessage = null;\n        this.reloading();\n      }\n    },\n    mixinDatacomErrorMessage(val, oldval) {\n      if (val) {\n        this.emitMsg({name: 'error', params: {type:\"error\", errorShow: this.errorShow, msg: val, id: this.cid}});\n        if(this.errorShow){\n          console.log('[秋云图表组件]' + val);\n        }\n      }\n    },\n    errorMessage(val, oldval) {\n      if (val && this.errorShow && val !== null && val !== 'null' && val !== '') {\n        this.showchart = false;\n        this.mixinDatacomLoading = false;\n        this.mixinDatacomErrorMessage = val;\n      } else {\n        this.showchart = false;\n        this.mixinDatacomErrorMessage = null;\n        this.reloading();\n      }\n    }\n  },\n  computed: {\n    optsProps() {\n      return JSON.parse(JSON.stringify(this.opts));\n    },\n    eoptsProps() {\n      return JSON.parse(JSON.stringify(this.eopts));\n    },\n    chartDataProps() {\n      return JSON.parse(JSON.stringify(this.chartData));\n    },\n  },\n  methods: {\n    beforeInit(){\n      this.mixinDatacomErrorMessage = null;\n      if (typeof this.chartData === 'object' && this.chartData != null && this.chartData.series !== undefined && this.chartData.series.length > 0) {\n        //拷贝一下chartData，为了opts变更后统一数据来源\n        this.drawData = deepCloneAssign({}, this.chartData);\n        this.mixinDatacomLoading = false;\n        this.showchart = true;\n        this.checkData(this.chartData);\n      }else if(this.localdata.length>0){\n        this.mixinDatacomLoading = false;\n        this.showchart = true;\n        this.localdataInit(this.localdata);\n      }else if(this.collection !== ''){\n        this.mixinDatacomLoading = false;\n        this.getCloudData();\n      }else{\n        this.mixinDatacomLoading = true;\n      }\n    },\n    localdataInit(resdata){\n      //替换enum类型为正确的描述\n      if(this.groupEnum.length>0){\n        for (let i = 0; i < resdata.length; i++) {\n          for (let j = 0; j < this.groupEnum.length; j++) {\n            if(resdata[i].group === this.groupEnum[j].value){\n              resdata[i].group = this.groupEnum[j].text\n            }\n          }\n        }\n      }\n      if(this.textEnum.length>0){\n        for (let i = 0; i < resdata.length; i++) {\n          for (let j = 0; j < this.textEnum.length; j++) {\n            if(resdata[i].text === this.textEnum[j].value){\n              resdata[i].text = this.textEnum[j].text\n            }\n          }\n        }\n      }\n      let needCategories = false;\n      let tmpData = {categories:[], series:[]}\n      let tmpcategories = []\n      let tmpseries = [];\n      //拼接categories\n      if(this.echarts === true){\n        needCategories = cfe.categories.includes(this.type)\n      }else{\n        needCategories = cfu.categories.includes(this.type)\n      }\n      if(needCategories === true){\n        //如果props中的chartData带有categories，则优先使用chartData的categories\n        if(this.chartData && this.chartData.categories && this.chartData.categories.length>0){\n          tmpcategories = this.chartData.categories\n        }else{\n          //如果是日期类型的数据，不管是本地数据还是云数据，都按起止日期自动拼接categories\n          if(this.startDate && this.endDate){\n            let idate = new Date(this.startDate)\n            let edate = new Date(this.endDate)\n            while (idate <= edate) {\n            \ttmpcategories.push(getFormatDate(idate))\n            \tidate = idate.setDate(idate.getDate() + 1)\n            \tidate = new Date(idate)\n            }\n          //否则从结果中去重并拼接categories\n          }else{\n            let tempckey = {};\n            resdata.map(function(item, index) {\n              if (item.text != undefined && !tempckey[item.text]) {\n                tmpcategories.push(item.text)\n                tempckey[item.text] = true\n              }\n            });\n          }\n        }\n        tmpData.categories = tmpcategories\n      }\n      //拼接series\n      let tempskey = {};\n      resdata.map(function(item, index) {\n        if (item.group != undefined && !tempskey[item.group]) {\n          tmpseries.push({ name: item.group, data: [] });\n          tempskey[item.group] = true;\n        }\n      });\n      //如果没有获取到分组名称(可能是带categories的数据，也可能是不带的饼图类)\n      if (tmpseries.length == 0) {\n        tmpseries = [{ name: '默认分组', data: [] }];\n        //如果是需要categories的图表类型\n        if(needCategories === true){\n          for (let j = 0; j < tmpcategories.length; j++) {\n            let seriesdata = 0;\n            for (let i = 0; i < resdata.length; i++) {\n              if (resdata[i].text == tmpcategories[j]) {\n                seriesdata = resdata[i].value;\n              }\n            }\n            tmpseries[0].data.push(seriesdata);\n          }\n        //如果是饼图类的图表类型\n        }else{\n          for (let i = 0; i < resdata.length; i++) {\n            tmpseries[0].data.push({\"name\": resdata[i].text,\"value\": resdata[i].value});\n          }\n        }\n      //如果有分组名\n      } else {\n        for (let k = 0; k < tmpseries.length; k++) {\n          //如果有categories\n          if (tmpcategories.length > 0) {\n            for (let j = 0; j < tmpcategories.length; j++) {\n              let seriesdata = 0;\n              for (let i = 0; i < resdata.length; i++) {\n                if (tmpseries[k].name == resdata[i].group && resdata[i].text == tmpcategories[j]) {\n                  seriesdata = resdata[i].value;\n                }\n              }\n              tmpseries[k].data.push(seriesdata);\n            }\n          //如果传了group而没有传text，即没有categories（正常情况下这种数据是不符合数据要求规范的）\n          } else {\n            for (let i = 0; i < resdata.length; i++) {\n              if (tmpseries[k].name == resdata[i].group) {\n                tmpseries[k].data.push(resdata[i].value);\n              }\n            }\n          }\n        }\n      }\n      tmpData.series = tmpseries\n      //拷贝一下chartData，为了opts变更后统一数据来源\n      this.drawData = deepCloneAssign({}, tmpData);\n      this.checkData(tmpData)\n    },\n    reloading() {\n      if(this.errorReload === false){\n        return;\n      }\n      this.showchart = false;\n      this.mixinDatacomErrorMessage = null;\n      if (this.collection !== '') {\n        this.mixinDatacomLoading = false;\n        this.onMixinDatacomPropsChange(true);\n      } else {\n        this.beforeInit();\n      }\n    },\n    checkData(anyData) {\n      let cid = this.cid\n      //复位opts或eopts\n      if(this.echarts === true){\n        cfe.option[cid] = deepCloneAssign({}, this.eopts);\n        cfe.option[cid].id = cid;\n        cfe.option[cid].type = this.type;\n      }else{\n        if (this.type && cfu.type.includes(this.type)) {\n          cfu.option[cid] = deepCloneAssign({}, cfu[this.type], this.opts);\n          cfu.option[cid].canvasId = cid;\n        } else {\n          this.mixinDatacomLoading = false;\n          this.showchart = false;\n          this.mixinDatacomErrorMessage = '参数错误：props参数中type类型不正确';\n        }\n      }\n      //挂载categories和series\n      let newData = deepCloneAssign({}, anyData);\n      if (newData.series !== undefined && newData.series.length > 0) {\n        this.mixinDatacomErrorMessage = null;\n        if (this.echarts === true) {\n          cfe.option[cid].chartData = newData;\n          this.$nextTick(()=>{\n            this.init()\n          })\n        }else{\n          cfu.option[cid].categories = newData.categories;\n          cfu.option[cid].series = newData.series;\n          this.$nextTick(()=>{\n            this.init()\n          })\n        }\n      }\n    },\n    resizeHandler() {\n      //渲染防抖\n      let currTime = Date.now();\n      let lastDrawTime = this.lastDrawTime?this.lastDrawTime:currTime-3000;\n      let duration = currTime - lastDrawTime;\n      if (duration < 1000) return;\n      let chartdom = uni\n        .createSelectorQuery()\n        // #ifndef MP-ALIPAY\n        .in(this)\n        // #endif\n        .select('#ChartBoxId'+this.cid)\n        .boundingClientRect(data => {\n          this.showchart = true;\n          if (data.width > 0 && data.height > 0) {\n            if (data.width !== this.cWidth || data.height !== this.cHeight) {\n              this.checkData(this.drawData)\n            }\n          }\n        })\n        .exec();\n    },\n    getCloudData() {\n      if (this.mixinDatacomLoading == true) {\n        return;\n      }\n      this.mixinDatacomLoading = true;\n      this.mixinDatacomGet()\n        .then(res => {\n          this.mixinDatacomResData = res.result.data;\n          this.localdataInit(this.mixinDatacomResData);\n        })\n        .catch(err => {\n          this.mixinDatacomLoading = false;\n          this.showchart = false;\n          this.mixinDatacomErrorMessage = '请求错误：' + err;\n        });\n    },\n    onMixinDatacomPropsChange(needReset, changed) {\n      if (needReset == true && this.collection !== '') {\n        this.showchart = false;\n        this.mixinDatacomErrorMessage = null;\n        this._clearChart();\n        this.getCloudData();\n      }\n    },\n    _clearChart() {\n      let cid = this.cid\n      if (this.echarts !== true && cfu.option[cid] && cfu.option[cid].context) {\n        const ctx = cfu.option[cid].context;\n        if(typeof ctx === \"object\" && !!!cfu.option[cid].update){\n          ctx.clearRect(0, 0, this.cWidth*this.pixel, this.cHeight*this.pixel);\n          ctx.draw();\n        }\n      }\n    },\n    init() {\n      let cid = this.cid\n      let chartdom = uni\n        .createSelectorQuery()\n        // #ifndef MP-ALIPAY\n        .in(this)\n        // #endif\n        .select('#ChartBoxId'+cid)\n        .boundingClientRect(data => {\n          if (data.width > 0 && data.height > 0) {\n            this.mixinDatacomLoading = false;\n            this.showchart = true;\n            this.lastDrawTime = Date.now();\n            this.cWidth = data.width;\n            this.cHeight = data.height;\n            if(this.echarts !== true){\n              cfu.option[cid].background = this.background == 'rgba(0,0,0,0)' ? '#FFFFFF' : this.background;\n              cfu.option[cid].canvas2d = this.type2d;\n              cfu.option[cid].pixelRatio = this.pixel;\n              cfu.option[cid].animation = this.animation;\n              cfu.option[cid].width = data.width * this.pixel;\n              cfu.option[cid].height = data.height * this.pixel;\n              cfu.option[cid].onzoom = this.onzoom;\n              cfu.option[cid].ontap = this.ontap;\n              cfu.option[cid].ontouch = this.ontouch;\n              cfu.option[cid].onmouse = this.openmouse;\n              cfu.option[cid].onmovetip = this.onmovetip;\n              cfu.option[cid].tooltipShow = this.tooltipShow;\n              cfu.option[cid].tooltipFormat = this.tooltipFormat;\n              cfu.option[cid].tooltipCustom = this.tooltipCustom;\n              cfu.option[cid].inScrollView = this.inScrollView;\n              cfu.option[cid].lastDrawTime = this.lastDrawTime;\n              cfu.option[cid].tapLegend = this.tapLegend;\n            }\n            //如果是H5或者App端，采用renderjs渲染图表\n            if (this.inH5 || this.inApp) {\n              if (this.echarts == true) {\n                cfe.option[cid].ontap = this.ontap;\n                cfe.option[cid].onmouse = this.openmouse;\n                cfe.option[cid].tooltipShow = this.tooltipShow;\n                cfe.option[cid].tooltipFormat = this.tooltipFormat;\n                cfe.option[cid].tooltipCustom = this.tooltipCustom;\n                cfe.option[cid].lastDrawTime = this.lastDrawTime;\n                this.echartsOpts = deepCloneAssign({}, cfe.option[cid]);\n              } else {\n                cfu.option[cid].rotateLock = cfu.option[cid].rotate;\n                this.uchartsOpts = deepCloneAssign({}, cfu.option[cid]);\n              }\n            //如果是小程序端，采用uCharts渲染\n            } else {\n              cfu.option[cid] = formatterAssign(cfu.option[cid],cfu.formatter)\n              this.mixinDatacomErrorMessage = null;\n              this.mixinDatacomLoading = false;\n              this.showchart = true;\n              this.$nextTick(()=>{\n                if (this.type2d === true) {\n                  const query = uni.createSelectorQuery().in(this)\n                  query\n                    .select('#' + cid)\n                    .fields({ node: true, size: true })\n                    .exec(res => {\n                      if (res[0]) {\n                        const canvas = res[0].node;\n                        const ctx = canvas.getContext('2d');\n                        cfu.option[cid].context = ctx;\n                        cfu.option[cid].rotateLock = cfu.option[cid].rotate;\n                        if(cfu.instance[cid] && cfu.option[cid] && cfu.option[cid].update === true){\n                          this._updataUChart(cid)\n                        }else{\n                          canvas.width = data.width * this.pixel;\n                          canvas.height = data.height * this.pixel;\n                          canvas._width = data.width * this.pixel;\n                          canvas._height = data.height * this.pixel;\n                          setTimeout(()=>{\n                            cfu.option[cid].context.restore();\n                            cfu.option[cid].context.save();\n                            this._newChart(cid)\n                          },100)\n                        }\n                      } else {\n                        this.showchart = false;\n                        this.mixinDatacomErrorMessage = '参数错误：开启2d模式后，未获取到dom节点，canvas-id:' + cid;\n                      }\n                    });\n                } else {\n                  if(this.inAli){\n                    cfu.option[cid].rotateLock = cfu.option[cid].rotate;\n                  }\n                  cfu.option[cid].context = uni.createCanvasContext(cid, this);\n                  if(cfu.instance[cid] && cfu.option[cid] && cfu.option[cid].update === true){\n                    this._updataUChart(cid)\n                  }else{\n                    setTimeout(()=>{\n                      cfu.option[cid].context.restore();\n                      cfu.option[cid].context.save();\n                      this._newChart(cid)\n                    },100)\n                  }\n                }\n              })\n            }\n          } else {\n            this.mixinDatacomLoading = false;\n            this.showchart = false;\n            if (this.reshow == true) {\n              this.mixinDatacomErrorMessage = '布局错误：未获取到父元素宽高尺寸！canvas-id:' + cid;\n            }\n          }\n        })\n        .exec();\n    },\n    saveImage(){\n    \tuni.canvasToTempFilePath({\n    \t  canvasId: this.cid,\n    \t  success: res=>{\n    \t    //#ifdef H5\n    \t\t\tvar a = document.createElement(\"a\");\n    \t\t\ta.href = res.tempFilePath;\n    \t\t\ta.download = this.cid;\n    \t\t\ta.target = '_blank'\n    \t\t\ta.click();\n    \t    //#endif\n    \t    //#ifndef H5\n    \t      uni.saveImageToPhotosAlbum({\n              filePath: res.tempFilePath,\n              success: function () {\n                uni.showToast({\n                  title: '保存成功',\n                  duration: 2000\n                });\n              }\n    \t      });\n    \t    //#endif\n    \t  } \n    \t},this);\n    },\n    getImage(){\n      if(this.type2d == false){\n        uni.canvasToTempFilePath({\n          canvasId: this.cid,\n          success: res=>{\n            this.emitMsg({name: 'getImage', params: {type:\"getImage\", base64: res.tempFilePath}});\n          }\n        },this);\n      }else{\n        const query = uni.createSelectorQuery().in(this)\n        query\n          .select('#' + this.cid)\n          .fields({ node: true, size: true })\n          .exec(res => {\n            if (res[0]) {\n              const canvas = res[0].node;\n              this.emitMsg({name: 'getImage', params: {type:\"getImage\", base64: canvas.toDataURL('image/png')}});\n            }\n          });\n      }\n    },\n    // #ifndef APP-VUE || H5\n    _newChart(cid) {\n      if (this.mixinDatacomLoading == true) {\n        return;\n      }\n      this.showchart = true;\n      cfu.instance[cid] = new uCharts(cfu.option[cid]);\n      cfu.instance[cid].addEventListener('renderComplete', () => {\n        this.emitMsg({name: 'complete', params: {type:\"complete\", complete: true, id: cid, opts: cfu.instance[cid].opts}});\n        cfu.instance[cid].delEventListener('renderComplete')\n      });\n      cfu.instance[cid].addEventListener('scrollLeft', () => {\n        this.emitMsg({name: 'scrollLeft', params: {type:\"scrollLeft\", scrollLeft: true, id: cid, opts: cfu.instance[cid].opts}});\n      });\n      cfu.instance[cid].addEventListener('scrollRight', () => {\n        this.emitMsg({name: 'scrollRight', params: {type:\"scrollRight\", scrollRight: true, id: cid, opts: cfu.instance[cid].opts}});\n      });\n    },\n    _updataUChart(cid) {\n      cfu.instance[cid].updateData(cfu.option[cid])\n    },\n    _tooltipDefault(item, category, index, opts) {\n      if (category) {\n        let data = item.data\n        if(typeof item.data === \"object\"){\n          data = item.data.value\n        }\n        return category + ' ' + item.name + ':' + data;\n      } else {\n        if (item.properties && item.properties.name) {\n          return item.properties.name;\n        } else {\n          return item.name + ':' + item.data;\n        }\n      }\n    },\n    _showTooltip(e) {\n      let cid = this.cid\n      let tc = cfu.option[cid].tooltipCustom\n      if (tc && tc !== undefined && tc !== null) {\n        let offset = undefined;\n        if (tc.x >= 0 && tc.y >= 0) {\n          offset = { x: tc.x, y: tc.y + 10 };\n        }\n        cfu.instance[cid].showToolTip(e, {\n          index: tc.index,\n          offset: offset,\n          textList: tc.textList,\n          formatter: (item, category, index, opts) => {\n            if (typeof cfu.option[cid].tooltipFormat === 'string' && cfu.formatter[cfu.option[cid].tooltipFormat]) {\n              return cfu.formatter[cfu.option[cid].tooltipFormat](item, category, index, opts);\n            } else {\n              return this._tooltipDefault(item, category, index, opts);\n            }\n          }\n        });\n      } else {\n        cfu.instance[cid].showToolTip(e, {\n          formatter: (item, category, index, opts) => {\n            if (typeof cfu.option[cid].tooltipFormat === 'string' && cfu.formatter[cfu.option[cid].tooltipFormat]) {\n              return cfu.formatter[cfu.option[cid].tooltipFormat](item, category, index, opts);\n            } else {\n              return this._tooltipDefault(item, category, index, opts);\n            }\n          }\n        });\n      }\n    },\n    _tap(e,move) {\n      let cid = this.cid\n      let currentIndex = null;\n      let legendIndex = null;\n      if (this.inScrollView === true || this.inAli) {\n        let chartdom = uni\n          .createSelectorQuery()\n          // #ifndef MP-ALIPAY\n          .in(this)\n          .select('#ChartBoxId'+cid)\n          // #endif\n          // #ifdef MP-ALIPAY\n          .select('#'+this.cid)\n          // #endif\n          .boundingClientRect(data => {\n            e.changedTouches=[];\n            if (this.inAli) {\n              e.changedTouches.unshift({ x: e.detail.clientX - data.left, y: e.detail.clientY - data.top});\n            }else{\n              e.changedTouches.unshift({ x: e.detail.x - data.left, y: e.detail.y - data.top - this.pageScrollTop});\n            }\n            if(move){\n              if (this.tooltipShow === true) {\n                this._showTooltip(e);\n              }\n            }else{\n              currentIndex = cfu.instance[cid].getCurrentDataIndex(e);\n              legendIndex = cfu.instance[cid].getLegendDataIndex(e);\n              if(this.tapLegend === true){\n                cfu.instance[cid].touchLegend(e);\n              }\n              if (this.tooltipShow === true) {\n                this._showTooltip(e);\n              }\n              this.emitMsg({name: 'getIndex', params: { type:\"getIndex\", event:{ x: e.detail.x - data.left, y: e.detail.y - data.top }, currentIndex: currentIndex, legendIndex: legendIndex, id: cid, opts: cfu.instance[cid].opts}});\n            }\n          })\n          .exec();\n      } else {\n        if(move){\n          if (this.tooltipShow === true) {\n            this._showTooltip(e);\n          }\n        }else{\n          e.changedTouches=[];\n          e.changedTouches.unshift({ x: e.detail.x - e.currentTarget.offsetLeft, y: e.detail.y - e.currentTarget.offsetTop });\n          currentIndex = cfu.instance[cid].getCurrentDataIndex(e);\n          legendIndex = cfu.instance[cid].getLegendDataIndex(e);\n          if(this.tapLegend === true){\n            cfu.instance[cid].touchLegend(e);\n          }\n          if (this.tooltipShow === true) {\n            this._showTooltip(e);\n          }\n          this.emitMsg({name: 'getIndex', params: {type:\"getIndex\", event:{ x: e.detail.x, y: e.detail.y - e.currentTarget.offsetTop }, currentIndex: currentIndex, legendIndex: legendIndex, id: cid, opts: cfu.instance[cid].opts}});\n        }\n      }\n    },\n    _touchStart(e) {\n      let cid = this.cid\n      lastMoveTime=Date.now();\n      if(cfu.option[cid].enableScroll === true && e.touches.length == 1){\n        cfu.instance[cid].scrollStart(e);\n      }\n      this.emitMsg({name:'getTouchStart', params:{type:\"touchStart\", event:e.changedTouches[0], id:cid, opts: cfu.instance[cid].opts}});\n    },\n    _touchMove(e) {\n      let cid = this.cid\n      let currMoveTime = Date.now();\n      let duration = currMoveTime - lastMoveTime;\n      let touchMoveLimit = cfu.option[cid].touchMoveLimit || 24;\n      if (duration < Math.floor(1000 / touchMoveLimit)) return;//每秒60帧\n      lastMoveTime = currMoveTime;\n      if(cfu.option[cid].enableScroll === true && e.changedTouches.length == 1){\n        cfu.instance[cid].scroll(e);\n      }\n      if(this.ontap === true && cfu.option[cid].enableScroll === false && this.onmovetip === true){\n        this._tap(e,true)\n      }\n      if(this.ontouch === true && cfu.option[cid].enableScroll === true && this.onzoom === true && e.changedTouches.length == 2){\n        cfu.instance[cid].dobuleZoom(e);\n      }\n      this.emitMsg({name: 'getTouchMove', params: {type:\"touchMove\", event:e.changedTouches[0], id: cid, opts: cfu.instance[cid].opts}});\n    },\n    _touchEnd(e) {\n      let cid = this.cid\n      if(cfu.option[cid].enableScroll === true && e.touches.length == 0){\n        cfu.instance[cid].scrollEnd(e);\n      }\n      this.emitMsg({name:'getTouchEnd', params:{type:\"touchEnd\", event:e.changedTouches[0], id:cid, opts: cfu.instance[cid].opts}});\n      if(this.ontap === true && cfu.option[cid].enableScroll === false && this.onmovetip === true){\n        this._tap(e,true)\n      }\n    },\n    // #endif\n    _error(e) {\n      this.mixinDatacomErrorMessage = e.detail.errMsg;\n    },\n    emitMsg(msg) {\n      this.$emit(msg.name, msg.params);\n    },\n    getRenderType() {\n      //防止如果开启echarts且父元素为v-if的情况renderjs监听不到prop变化的问题\n      if(this.echarts===true && this.mixinDatacomLoading===false){\n        this.beforeInit()\n      }\n    },\n    toJSON(){\n      return this\n    }\n  }\n};\n</script>\n\n<!-- #ifdef APP-VUE || H5 -->\n<script module=\"rdcharts\" lang=\"renderjs\">\nimport uChartsRD from '../../js_sdk/u-charts/u-charts.js';\nimport cfu from '../../js_sdk/u-charts/config-ucharts.js';\nimport cfe from '../../js_sdk/u-charts/config-echarts.js';\n\nvar that = {};\nvar rootdom = null;\n\nfunction rddeepCloneAssign(origin = {}, ...args) {\n  for (let i in args) {\n    for (let key in args[i]) {\n      if (args[i].hasOwnProperty(key)) {\n        origin[key] = args[i][key] && typeof args[i][key] === 'object' ? rddeepCloneAssign(Array.isArray(args[i][key]) ? [] : {}, origin[key], args[i][key]) : args[i][key];\n      }\n    }\n  }\n  return origin;\n}\n\nfunction rdformatterAssign(args,formatter) {\n  for (let key in args) {\n    if(args.hasOwnProperty(key) && args[key] !== null && typeof args[key] === 'object'){\n      rdformatterAssign(args[key],formatter)\n    }else if(key === 'format' && typeof args[key] === 'string'){\n      args['formatter'] = formatter[args[key]] ? formatter[args[key]] : undefined;\n    }\n  }\n  return args;\n}\n\nexport default {\n  data() {\n    return {\n      rid:null\n    }\n  },\n  mounted() {\n    rootdom = {top:0,left:0}\n    // #ifdef H5\n    let dm = document.querySelectorAll('uni-main')[0]\n    if(dm === undefined){\n      dm = document.querySelectorAll('uni-page-wrapper')[0]\n    }\n    rootdom = {top:dm.offsetTop,left:dm.offsetLeft}\n    // #endif\n    setTimeout(()=>{\n      if(this.rid === null){\n        this.$ownerInstance && this.$ownerInstance.callMethod('getRenderType')\n      }\n    },200)\n  },\n  destroyed(){\n    delete cfu.option[this.rid]\n    delete cfu.instance[this.rid]\n    delete cfe.option[this.rid]\n    delete cfe.instance[this.rid]\n  },\n  methods: {\n    //==============以下是ECharts的方法====================\n    ecinit(newVal, oldVal, owner, instance){\n      let cid = JSON.stringify(newVal.id)\n      this.rid = cid\n      that[cid] = this.$ownerInstance || instance\n      let eopts = JSON.parse(JSON.stringify(newVal))\n      let type = eopts.type;\n      //载入并覆盖默认配置\n      if (type && cfe.type.includes(type)) {\n        cfe.option[cid] = rddeepCloneAssign({}, cfe[type], eopts);\n      }else{\n        cfe.option[cid] = rddeepCloneAssign({}, eopts);\n      }\n      let newData = eopts.chartData;\n      if(newData){\n        //挂载categories和series\n        if(cfe.option[cid].xAxis && cfe.option[cid].xAxis.type && cfe.option[cid].xAxis.type === 'category'){\n          cfe.option[cid].xAxis.data = newData.categories\n        }\n        if(cfe.option[cid].yAxis && cfe.option[cid].yAxis.type && cfe.option[cid].yAxis.type === 'category'){\n          cfe.option[cid].yAxis.data = newData.categories\n        }\n        cfe.option[cid].series = []\n        for (var i = 0; i < newData.series.length; i++) {\n          cfe.option[cid].seriesTemplate = cfe.option[cid].seriesTemplate ? cfe.option[cid].seriesTemplate : {}\n          let Template = rddeepCloneAssign({},cfe.option[cid].seriesTemplate,newData.series[i])\n          cfe.option[cid].series.push(Template)\n        }\n      }\n      \n      if (typeof window.echarts === 'object') {\n          this.newEChart()\n      }else{\n        const script = document.createElement('script')\n        // #ifdef APP-VUE\n        script.src = './uni_modules/qiun-data-charts/static/app-plus/echarts.min.js';\n        // #endif\n        // #ifdef H5\n        const { origin } = window.location;\n        let base_url = \"\";\n        // #ifdef VUE2\n        base_url = process.env.BASE_URL;\n        // #endif\n        // #ifdef VUE3\n        base_url = import.meta.env.BASE_URL;\n        // #endif\n        const rooturl = origin + base_url;\n        script.src = rooturl + 'uni_modules/qiun-data-charts/static/h5/echarts.min.js';\n        // #endif\n        script.onload = this.newEChart\n        document.head.appendChild(script)\n      }\n    },\n    ecresize(newVal, oldVal, owner, instance){\n      if(cfe.instance[this.rid]){\n        cfe.instance[this.rid].resize()\n      }\n    },\n    newEChart(){\n      let cid = this.rid\n      if(cfe.instance[cid] === undefined){\n        cfe.instance[cid] = echarts.init(that[cid].$el.children[0])\n        //ontap开启后才触发click事件\n        if(cfe.option[cid].ontap === true){\n          cfe.instance[cid].on('click', resdata => {\n            let event = JSON.parse(JSON.stringify({\n              x:resdata.event.offsetX,y:resdata.event.offsetY\n            }))\n            that[cid].callMethod('emitMsg',{name:\"getIndex\", params:{type:\"getIndex\", event:event, currentIndex:resdata.dataIndex, value:resdata.data, seriesName: resdata.seriesName,id:cid}})\n          })\n          // 增加ECharts的highlight消息，实现按下移动返回索引功能。add by onefish 创建于 2021-12-11 09:50\n          cfe.instance[cid].on('highlight', resdata => {\n            that[cid].callMethod('emitMsg',{name:\"getHighlight\", params:{type:\"highlight\", res:resdata, id:cid}})\n          })\n        }\n        this.updataEChart(cid,cfe.option[cid])\n      }else{\n        this.updataEChart(cid,cfe.option[cid])\n      }\n    },\n    updataEChart(cid,option){\n      //替换option内format属性为formatter的预定义方法\n      option = rdformatterAssign(option,cfe.formatter)\n      if(option.tooltip){\n        option.tooltip.show = option.tooltipShow?true:false;\n        option.tooltip.position = this.tooltipPosition()\n        //tooltipFormat方法，替换组件的tooltipFormat为config-echarts.js内对应的方法\n        if (typeof option.tooltipFormat === 'string' && cfe.formatter[option.tooltipFormat]) {\n          option.tooltip.formatter = option.tooltip.formatter ? option.tooltip.formatter : cfe.formatter[option.tooltipFormat]\n        }\n      }\n      // 颜色渐变添加的方法\n      if (option.series) {\n      \tfor (let i in option.series) {\n      \t\tlet linearGradient = option.series[i].linearGradient\n      \t\tif (linearGradient) {\n      \t\t\toption.series[i].color = new echarts.graphic.LinearGradient(linearGradient[0],linearGradient[1],linearGradient[2],linearGradient[3],linearGradient[4])\n      \t\t}\n      \t}\n      }\n      cfe.instance[cid].setOption(option, option.notMerge)\n      cfe.instance[cid].on('finished', function(){\n        that[cid].callMethod('emitMsg',{name:\"complete\",params:{type:\"complete\",complete:true,id:cid}})\n        if(cfe.instance[cid]){\n          cfe.instance[cid].off('finished')\n        }\n      });\n\n      //修复init初始化实例获取宽高不正确问题\n      if(\n        typeof that[cid].$el.children[0].clientWidth != 'undefined' &&\n          (\n            Math.abs( that[cid].$el.children[0].clientWidth - cfe.instance[cid].getWidth() )>3 ||\n            Math.abs( that[cid].$el.children[0].clientHeight - cfe.instance[cid].getHeight() )>3\n          )\n      ){this.ecresize();}\n    },\n    tooltipPosition(){\n      return (point, params, dom, rect, size) => {\n      \tlet x = point[0]\n      \tlet y = point[1]\n      \tlet viewWidth = size.viewSize[0]\n      \tlet viewHeight = size.viewSize[1]\n      \tlet boxWidth = size.contentSize[0]\n      \tlet boxHeight = size.contentSize[1]\n      \tlet posX = x + 30 \n      \tlet posY = y + 30 \n      \tif (posX + boxWidth > viewWidth) { \n      \t\tposX = x - boxWidth - 30\n      \t}\n      \tif (posY + boxHeight > viewHeight) {\n      \t\tposY = y - boxHeight - 30\n      \t}\n      \treturn [posX, posY]\n      }\n    },\n    //==============以下是uCharts的方法====================\n    ucinit(newVal, oldVal, owner, instance){\n      if(JSON.stringify(newVal) == JSON.stringify(oldVal)){\n        return;\n      }\n      if(!newVal.canvasId){\n        return;\n      }\n      let cid = JSON.parse(JSON.stringify(newVal.canvasId))\n      this.rid = cid\n      that[cid] = this.$ownerInstance || instance\n      cfu.option[cid] = JSON.parse(JSON.stringify(newVal))\n      cfu.option[cid] = rdformatterAssign(cfu.option[cid],cfu.formatter)\n      let canvasdom = document.getElementById(cid)\n      if(canvasdom && canvasdom.children[0]){\n        cfu.option[cid].context = canvasdom.children[0].getContext(\"2d\")\n        if(cfu.instance[cid] && cfu.option[cid] && cfu.option[cid].update === true){\n          this.updataUChart()\n        }else{\n          setTimeout(()=>{\n            cfu.option[cid].context.restore();\n            cfu.option[cid].context.save();\n            this.newUChart()\n          },100)\n        }\n      }\n    },\n    newUChart() {\n      let cid = this.rid\n      cfu.instance[cid] = new uChartsRD(cfu.option[cid])\n      cfu.instance[cid].addEventListener('renderComplete', () => {\n        that[cid].callMethod('emitMsg',{name:\"complete\",params:{type:\"complete\",complete:true,id:cid, opts: cfu.instance[cid].opts}})\n        cfu.instance[cid].delEventListener('renderComplete')\n      });\n      cfu.instance[cid].addEventListener('scrollLeft', () => {\n        that[cid].callMethod('emitMsg',{name:\"scrollLeft\",params:{type:\"scrollLeft\",scrollLeft:true,id:cid, opts: cfu.instance[cid].opts}})\n      });\n      cfu.instance[cid].addEventListener('scrollRight', () => {\n        that[cid].callMethod('emitMsg',{name:\"scrollRight\",params:{type:\"scrollRight\",scrollRight:true,id:cid, opts: cfu.instance[cid].opts}})\n      });\n    },\n    updataUChart() {\n      let cid = this.rid\n      cfu.instance[cid].updateData(cfu.option[cid])\n    },\n    tooltipDefault(item, category, index, opts) {\n      if (category) {\n        let data = item.data\n        if(typeof item.data === \"object\"){\n          data = item.data.value\n        }\n        return category + ' ' + item.name + ':' + data;\n      } else {\n        if (item.properties && item.properties.name) {\n          return item.properties.name ;\n        } else {\n          return item.name + ':' + item.data;\n        }\n      }\n    },\n    showTooltip(e,cid) {\n      let tc = cfu.option[cid].tooltipCustom\n      if (tc && tc !== undefined && tc !== null) {\n        let offset = undefined;\n        if (tc.x >= 0 && tc.y >= 0) {\n          offset = { x: tc.x, y: tc.y + 10 };\n        }\n        cfu.instance[cid].showToolTip(e, {\n          index: tc.index,\n          offset: offset,\n          textList: tc.textList,\n          formatter: (item, category, index, opts) => {\n            if (typeof cfu.option[cid].tooltipFormat === 'string' && cfu.formatter[cfu.option[cid].tooltipFormat]) {\n              return cfu.formatter[cfu.option[cid].tooltipFormat](item, category, index, opts);\n            } else {\n              return this.tooltipDefault(item, category, index, opts);\n            }\n          }\n        });\n      } else {\n        cfu.instance[cid].showToolTip(e, {\n          formatter: (item, category, index, opts) => {\n            if (typeof cfu.option[cid].tooltipFormat === 'string' && cfu.formatter[cfu.option[cid].tooltipFormat]) {\n              return cfu.formatter[cfu.option[cid].tooltipFormat](item, category, index, opts);\n            } else {\n              return this.tooltipDefault(item, category, index, opts);\n            }\n          }\n        });\n      }\n    },\n    tap(e) {\n      let cid = this.rid\n      let ontap = cfu.option[cid].ontap\n      let tooltipShow = cfu.option[cid].tooltipShow\n      let tapLegend = cfu.option[cid].tapLegend\n      if(ontap == false) return;\n      let currentIndex=null\n      let legendIndex=null\n      let rchartdom = document.getElementById('UC'+cid).getBoundingClientRect()\n      let tmpe = {}\n      if(e.detail.x){//tap或者click的事件\n        tmpe = { x: e.detail.x - rchartdom.left, y:e.detail.y - rchartdom.top + rootdom.top}\n      }else{//mouse的事件\n        tmpe = { x: e.clientX - rchartdom.left, y:e.clientY - rchartdom.top + rootdom.top}\n      }\n      e.changedTouches = [];\n      e.changedTouches.unshift(tmpe)\n      currentIndex=cfu.instance[cid].getCurrentDataIndex(e)\n      legendIndex=cfu.instance[cid].getLegendDataIndex(e)\n      if(tapLegend === true){\n        cfu.instance[cid].touchLegend(e);\n      }\n      if(tooltipShow==true){\n        this.showTooltip(e,cid)\n      }\n      that[cid].callMethod('emitMsg',{name:\"getIndex\",params:{type:\"getIndex\",event:tmpe,currentIndex:currentIndex,legendIndex:legendIndex,id:cid, opts: cfu.instance[cid].opts}})\n    },\n    touchStart(e) {\n      let cid = this.rid\n      let ontouch = cfu.option[cid].ontouch\n      if(ontouch == false) return;\n      if(cfu.option[cid].enableScroll === true && e.touches.length == 1){\n        cfu.instance[cid].scrollStart(e);\n      }\n      that[cid].callMethod('emitMsg',{name:\"getTouchStart\",params:{type:\"touchStart\",event:e.changedTouches[0],id:cid, opts: cfu.instance[cid].opts}})\n    },\n    touchMove(e) {\n      let cid = this.rid\n      let ontouch = cfu.option[cid].ontouch\n      if(ontouch == false) return;\n      if(cfu.option[cid].enableScroll === true && e.changedTouches.length == 1){\n        cfu.instance[cid].scroll(e);\n      }\n      if(cfu.option[cid].ontap === true && cfu.option[cid].enableScroll === false && cfu.option[cid].onmovetip === true){\n        let rchartdom = document.getElementById('UC'+cid).getBoundingClientRect()\n        let tmpe = { x: e.changedTouches[0].clientX - rchartdom.left, y:e.changedTouches[0].clientY - rchartdom.top + rootdom.top}\n        e.changedTouches.unshift(tmpe)\n        if(cfu.option[cid].tooltipShow === true){\n          this.showTooltip(e,cid)\n        }\n      }\n      if(ontouch === true && cfu.option[cid].enableScroll === true && cfu.option[cid].onzoom === true && e.changedTouches.length == 2){\n        cfu.instance[cid].dobuleZoom(e);\n      }\n      that[cid].callMethod('emitMsg',{name:\"getTouchMove\",params:{type:\"touchMove\",event:e.changedTouches[0],id:cid, opts: cfu.instance[cid].opts}})\n    },\n    touchEnd(e) {\n      let cid = this.rid\n      let ontouch = cfu.option[cid].ontouch\n      if(ontouch == false) return;\n      if(cfu.option[cid].enableScroll === true && e.touches.length == 0){\n        cfu.instance[cid].scrollEnd(e);\n      }\n      that[cid].callMethod('emitMsg',{name:\"getTouchEnd\",params:{type:\"touchEnd\",event:e.changedTouches[0],id:cid, opts: cfu.instance[cid].opts}})\n    },\n    mouseDown(e) {\n      let cid = this.rid\n      let onmouse = cfu.option[cid].onmouse\n      if(onmouse == false) return;\n      let rchartdom = document.getElementById('UC'+cid).getBoundingClientRect()\n      let tmpe = {}\n      tmpe = { x: e.clientX - rchartdom.left, y:e.clientY - rchartdom.top + rootdom.top}\n      e.changedTouches = [];\n      e.changedTouches.unshift(tmpe)\n      cfu.instance[cid].scrollStart(e)\n      cfu.option[cid].mousedown=true;\n      that[cid].callMethod('emitMsg',{name:\"getTouchStart\",params:{type:\"mouseDown\",event:tmpe,id:cid, opts: cfu.instance[cid].opts}})\n    },\n    mouseMove(e) {\n      let cid = this.rid\n      let onmouse = cfu.option[cid].onmouse\n      let tooltipShow = cfu.option[cid].tooltipShow\n      if(onmouse == false) return;\n      let rchartdom = document.getElementById('UC'+cid).getBoundingClientRect()\n      let tmpe = {}\n      tmpe = { x: e.clientX - rchartdom.left, y:e.clientY - rchartdom.top + rootdom.top}\n      e.changedTouches = [];\n      e.changedTouches.unshift(tmpe)\n      if(cfu.option[cid].mousedown){\n        cfu.instance[cid].scroll(e)\n        that[cid].callMethod('emitMsg',{name:\"getTouchMove\",params:{type:\"mouseMove\",event:tmpe,id:cid, opts: cfu.instance[cid].opts}})\n      }else if(cfu.instance[cid]){\n        if(tooltipShow==true){\n          this.showTooltip(e,cid)\n        }\n      }\n    },\n    mouseUp(e) {\n      let cid = this.rid\n      let onmouse = cfu.option[cid].onmouse\n      if(onmouse == false) return;\n      let rchartdom = document.getElementById('UC'+cid).getBoundingClientRect()\n      let tmpe = {}\n      tmpe = { x: e.clientX - rchartdom.left, y:e.clientY - rchartdom.top + rootdom.top}\n      e.changedTouches = [];\n      e.changedTouches.unshift(tmpe)\n      cfu.instance[cid].scrollEnd(e)\n      cfu.option[cid].mousedown=false;\n      that[cid].callMethod('emitMsg',{name:\"getTouchEnd\",params:{type:\"mouseUp\",event:tmpe,id:cid, opts: cfu.instance[cid].opts}})\n    },\n  }\n}\n</script>\n<!-- #endif -->\n\n<style scoped>\n.chartsview {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex: 1;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n","import Component from 'C:/Users/10459/Desktop/BillV4/BillV4/uni_modules/qiun-data-charts(uni_modules)/components/qiun-data-charts/qiun-data-charts.vue'\nwx.createComponent(Component)"],"names":["uniCloud","uni","cfu","uCharts"],"mappings":"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"}