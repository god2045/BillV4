{"version":3,"file":"addBill.js","sources":["pages/addBill/addBill.vue","C:/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkQmlsbC9hZGRCaWxsLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"addpage\">\r\n    <form @submit=\"formSubmit\" @reset=\"formReset\">\r\n      <view class=\"section\">\r\n        <view class=\"title\">类型</view>\r\n        <picker @columnchange=\"typeCChange\" @change=\"typeChange\" :value=\"typeIndex\" :range=\"type\" mode=\"multiSelector\"\r\n          class=\"input\" name='billType'>\r\n          <view class=\"picker\">账单类型：{{showType}}</view>\r\n        </picker>\r\n      </view>\r\n      <view class=\"section\">\r\n        <view class=\"title\">金额</view>\r\n        <input type=\"number\" class=\"input\" maxlength=\"300\" placeholder=\"请输入金额\" v-model=\"money\" name='money' />\r\n      </view>\r\n      <view class=\"section\">\r\n        <view class=\"title\">账单时间</view>\r\n        <picker @change=\"(e)=>date = e.detail.value\" fields=\"day\" :value=\"date\" mode=\"date\" class=\"input\"\r\n          name='billDate'>\r\n          <view class=\"picker\">账单时间：{{date}}</view>\r\n        </picker>\r\n      </view>\r\n      <view class=\"section\">\r\n        <view class=\"title\">备注</view>\r\n        <input type=\"text\" class=\"input\" maxlength=\"300\" placeholder=\"请输入备注\" v-model=\"content\" name='content' />\r\n      </view>\r\n      <view class=\"area\">\r\n        <button class=\"btn\" type=\"warn\" formType=\"reset\">重置</button>\r\n        <button class=\"btn\" type=\"primary\" formType=\"submit\">提交</button>\r\n      </view>\r\n    </form>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\n  import {\r\n    ref,\r\n    computed\r\n  } from 'vue'\r\n  let [date, money, content] = [ref(formatTime()), ref(''), ref('')]\r\n  const typeC1 = [\"支出\", \"收入\"]\r\n  const typeC2 = [\r\n    [\"餐饮\", \"其他支出\"],\r\n    [\"工资\", \"投资\", \"其他收入\"]\r\n  ]\r\n  let type = ref([typeC1, typeC2[0]])\r\n  let typeIndex = ref([0, 0])\r\n  let showType = computed(() => type.value[0][typeIndex.value[0]] + \"-\" + type.value[1][typeIndex.value[1]])\r\n\r\n  function formatTime() {\r\n    // 获取当前时间\r\n    const now = new Date();\r\n    // 获取各个时间部分\r\n    const year = now.getFullYear();\r\n    const month = now.getMonth() + 1; // 月份从0开始，需要+1\r\n    const day = now.getDate();\r\n    const formattedTime = `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;\r\n    return formattedTime\r\n  }\r\n\r\n  function formSubmit(e) {\r\n    let formdata = e.detail.value\r\n    if (!formdata.billType || !formdata.money || !formdata.billDate) {\r\n      console.log(\"请输入必填项\")\r\n      uni.showToast({\r\n        title: \"请输入必填项\",\r\n        icon: \"error\",\r\n      })\r\n      return\r\n    }\r\n    let typeLX = type.value[0][formdata.billType[0]]\r\n    let typeLB = type.value[1][formdata.billType[1]]\r\n    uniCloud.callFunction({\r\n      name: \"fun\",\r\n      data: {\r\n        api: \"addBill\",\r\n        typeLX: typeLX,\r\n        typeLB: typeLB,\r\n        money: formdata.money,\r\n        date: formdata.billDate,\r\n        content: formdata.content,\r\n      }\r\n    }).then(res => {\r\n      console.log(res)\r\n      uni.showToast({\r\n        title: \"添加成功\",\r\n        icon: \"success\",\r\n      })\r\n      formReset(e)\r\n    })\r\n  }\r\n\r\n  function formReset(e) {\r\n    typeIndex.value = [0, 0]\r\n    type.value = [typeC1, typeC2[0]]\r\n    // showType.value = type.value[0][0] + \"-\" + type.value[1][0]\r\n    date.value = formatTime()\r\n    money.value = content.value = ''\r\n  }\r\n\r\n  function typeCChange(e) {\r\n    var data = {\r\n      type: type.value,\r\n      typeIndex: typeIndex.value,\r\n    };\r\n    data.typeIndex[e.detail.column] = e.detail.value;\r\n    switch (e.detail.column) {\r\n      case 0:\r\n        switch (data.typeIndex[0]) {\r\n          case 0:\r\n            data.type[1] = typeC2[0];\r\n            break;\r\n          case 1:\r\n            data.type[1] = typeC2[1];\r\n            break;\r\n        }\r\n    }\r\n  }\r\n\r\n  function typeChange(e) {\r\n    console.log(showType.value)\r\n    // showType.value = type.value[0][typeIndex.value[0]] + '-' + type.value[1][typeIndex.value[1]];\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .addpage {\r\n    margin: 40rpx;\r\n  }\r\n\r\n  .section {\r\n    margin: 40rpx 0 80rpx;\r\n  }\r\n\r\n  .title {\r\n    font-size: 36rpx;\r\n  }\r\n\r\n  .input {\r\n    margin: 30rpx 0;\r\n    border-bottom: 1px solid #666;\r\n    padding: 20rpx 10rpx;\r\n    width: 100%;\r\n  }\r\n\r\n  .mg {\r\n    margin: 30rpx 0;\r\n  }\r\n\r\n  .area {\r\n    margin: 10rpx auto;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: flex-start;\r\n\r\n    .btn {\r\n      margin: 30rpx 0\r\n    }\r\n  }\r\n</style>","import MiniProgramPage from 'D:/BillV4/BillV4/pages/addBill/addBill.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","uniCloud"],"mappings":";;;;;AAsCE,QAAI,CAAC,MAAM,OAAO,OAAO,IAAI,CAACA,cAAG,IAAC,WAAY,CAAA,GAAGA,cAAAA,IAAI,EAAE,GAAGA,cAAG,IAAC,EAAE,CAAC;AACjE,UAAM,SAAS,CAAC,MAAM,IAAI;AAC1B,UAAM,SAAS;AAAA,MACb,CAAC,MAAM,MAAM;AAAA,MACb,CAAC,MAAM,MAAM,MAAM;AAAA,IACpB;AACD,QAAI,OAAOA,cAAAA,IAAI,CAAC,QAAQ,OAAO,CAAC,CAAC,CAAC;AAClC,QAAI,YAAYA,cAAG,IAAC,CAAC,GAAG,CAAC,CAAC;AAC1B,QAAI,WAAWC,cAAQ,SAAC,MAAM,KAAK,MAAM,CAAC,EAAE,UAAU,MAAM,CAAC,CAAC,IAAI,MAAM,KAAK,MAAM,CAAC,EAAE,UAAU,MAAM,CAAC,CAAC,CAAC;AAEzG,aAAS,aAAa;AAEpB,YAAM,MAAM,oBAAI;AAEhB,YAAM,OAAO,IAAI;AACjB,YAAM,QAAQ,IAAI,SAAQ,IAAK;AAC/B,YAAM,MAAM,IAAI;AAChB,YAAM,gBAAgB,GAAG,IAAI,IAAI,MAAM,SAAQ,EAAG,SAAS,GAAG,GAAG,CAAC,IAAI,IAAI,SAAU,EAAC,SAAS,GAAG,GAAG,CAAC;AACrG,aAAO;AAAA,IACR;AAED,aAAS,WAAW,GAAG;AACrB,UAAI,WAAW,EAAE,OAAO;AACxB,UAAI,CAAC,SAAS,YAAY,CAAC,SAAS,SAAS,CAAC,SAAS,UAAU;AAC/DC,sBAAAA,MAAY,MAAA,OAAA,mCAAA,QAAQ;AACpBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACd,CAAO;AACD;AAAA,MACD;AACD,UAAI,SAAS,KAAK,MAAM,CAAC,EAAE,SAAS,SAAS,CAAC,CAAC;AAC/C,UAAI,SAAS,KAAK,MAAM,CAAC,EAAE,SAAS,SAAS,CAAC,CAAC;AAC/CC,oBAAAA,GAAS,aAAa;AAAA,QACpB,MAAM;AAAA,QACN,MAAM;AAAA,UACJ,KAAK;AAAA,UACL;AAAA,UACA;AAAA,UACA,OAAO,SAAS;AAAA,UAChB,MAAM,SAAS;AAAA,UACf,SAAS,SAAS;AAAA,QACnB;AAAA,MACP,CAAK,EAAE,KAAK,SAAO;AACbD,sBAAAA,sDAAY,GAAG;AACfA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACd,CAAO;AACD,kBAAW;AAAA,MACjB,CAAK;AAAA,IACF;AAED,aAAS,UAAU,GAAG;AACpB,gBAAU,QAAQ,CAAC,GAAG,CAAC;AACvB,WAAK,QAAQ,CAAC,QAAQ,OAAO,CAAC,CAAC;AAE/B,WAAK,QAAQ,WAAY;AACzB,YAAM,QAAQ,QAAQ,QAAQ;AAAA,IAC/B;AAED,aAAS,YAAY,GAAG;AACtB,UAAI,OAAO;AAAA,QACT,MAAM,KAAK;AAAA,QACX,WAAW,UAAU;AAAA,MAC3B;AACI,WAAK,UAAU,EAAE,OAAO,MAAM,IAAI,EAAE,OAAO;AAC3C,cAAQ,EAAE,OAAO,QAAM;AAAA,QACrB,KAAK;AACH,kBAAQ,KAAK,UAAU,CAAC,GAAC;AAAA,YACvB,KAAK;AACH,mBAAK,KAAK,CAAC,IAAI,OAAO,CAAC;AACvB;AAAA,YACF,KAAK;AACH,mBAAK,KAAK,CAAC,IAAI,OAAO,CAAC;AACvB;AAAA,UACH;AAAA,MACJ;AAAA,IACF;AAED,aAAS,WAAW,GAAG;AACrBA,oBAAAA,uDAAY,SAAS,KAAK;AAAA,IAE3B;;;;;;;;;;;;;;;;;;;;;;ACxHH,GAAG,WAAW,eAAe;"}