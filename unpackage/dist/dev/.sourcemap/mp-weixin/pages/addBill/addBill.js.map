{"version":3,"file":"addBill.js","sources":["pages/addBill/addBill.vue","../../../../../HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkQmlsbC9hZGRCaWxsLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"addpage\">\r\n    <form @submit=\"formSubmit\" @reset=\"formReset\">\r\n      <view class=\"section\">\r\n        <view class=\"title\">类型</view>\r\n        <picker @columnchange=\"typeCChange\" :value=\"billObject.typeIndex\" :range=\"billObject.type\" mode=\"multiSelector\"\r\n          class=\"input\" name='billType'>\r\n          <view class=\"picker\">账单类型：{{showType}}</view>\r\n        </picker>\r\n      </view>\r\n      <view class=\"section\">\r\n        <view class=\"title\">金额</view>\r\n        <input type=\"number\" class=\"input\" maxlength=\"300\" placeholder=\"请输入金额\" v-model=\"billObject.money\"\r\n          name='money' />\r\n      </view>\r\n      <view class=\"section\">\r\n        <view class=\"title\">账单时间</view>\r\n        <picker @change=\"(e)=>billObject.date = e.detail.value\" fields=\"day\" :value=\"billObject.date\" mode=\"date\"\r\n          class=\"input\" name='billDate'>\r\n          <view class=\"picker\">账单时间：{{billObject.date}}</view>\r\n        </picker>\r\n      </view>\r\n      <view class=\"section\">\r\n        <view class=\"title\">备注</view>\r\n        <input type=\"text\" class=\"input\" maxlength=\"300\" placeholder=\"请输入备注\" v-model=\"billObject.content\"\r\n          name='content' />\r\n      </view>\r\n      <view class=\"area\">\r\n        <button class=\"btn\" type=\"warn\" formType=\"reset\">重置</button>\r\n        <button class=\"btn\" type=\"primary\" formType=\"submit\">提交</button>\r\n      </view>\r\n    </form>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\n  import {\r\n    ref,\r\n    computed\r\n  } from 'vue'\r\n  const typeC1 = [\"支出\", \"收入\"]\r\n  const typeC2 = [\r\n    [\"餐饮\", \"其他支出\"],\r\n    [\"工资\", \"投资\", \"其他收入\"]\r\n  ]\r\n  let billObject = ref({\r\n    type: [typeC1, typeC2[0]],\r\n    typeIndex: [0, 0],\r\n    money: '',\r\n    date: formatTime(),\r\n    content: '',\r\n  })\r\n  let showType = computed(() => billObject.value.type[0][billObject.value.typeIndex[0]] + \"-\" + billObject.value.type[1]\r\n    [billObject.value.typeIndex[1]])\r\n\r\n  function formatTime() {\r\n    const now = new Date()\r\n    const year = now.getFullYear()\r\n    const month = (now.getMonth() + 1).toString().padStart(2, '0')\r\n    const day = now.getDate().toString().padStart(2, '0')\r\n    return `${year}-${month}-${day}`\r\n  }\r\n\r\n  function formSubmit(e) {\r\n    const {\r\n      billType: [LX, LB],\r\n      money,\r\n      billDate,\r\n      content\r\n    } = e.detail.value\r\n    const typeLX = billObject.value.type[0][LX]\r\n    const typeLB = billObject.value.type[1][LB]\r\n    if (!typeLX || !money || !billDate) {\r\n      return uni.showToast({\r\n        title: \"请输入必填项\",\r\n        icon: \"none\"\r\n      })\r\n    }\r\n\r\n    const {\r\n      type\r\n    } = billObject.value\r\n    const isExpense = typeLX === \"支出\"\r\n    uniCloud.callFunction({\r\n      name: \"fun\",\r\n      data: {\r\n        api: \"addBill\",\r\n        typeLX,\r\n        typeLB,\r\n        money: isExpense ? `-${money}` : money,\r\n        date: billDate,\r\n        content\r\n      }\r\n    }).then(() => {\r\n      uni.showToast({\r\n        title: \"添加成功\",\r\n        icon: \"success\"\r\n      })\r\n      formReset(e)\r\n    })\r\n  }\r\n\r\n  function formReset(e) {\r\n    billObject.value = {\r\n      typeIndex: [0, 0],\r\n      date: formatTime(),\r\n      type: [typeC1, typeC2[0]],\r\n      money: '',\r\n      content: '',\r\n    }\r\n  }\r\n\r\n  function typeCChange(e) {\r\n    const {\r\n      column: col,\r\n      value: val\r\n    } = e.detail\r\n    billObject.value.typeIndex[col] = val\r\n    if (col === 0) {\r\n      billObject.value.type[1] = typeC2[val]\r\n      billObject.value.typeIndex[1] = 0\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .addpage {\r\n    margin: 40rpx;\r\n  }\r\n\r\n  .section {\r\n    margin: 40rpx 0 80rpx;\r\n  }\r\n\r\n  .title {\r\n    font-size: 36rpx;\r\n  }\r\n\r\n  .input {\r\n    margin: 30rpx 0;\r\n    border-bottom: 1px solid #666;\r\n    padding: 20rpx 10rpx;\r\n    width: 100%;\r\n  }\r\n\r\n  .mg {\r\n    margin: 30rpx 0;\r\n  }\r\n\r\n  .area {\r\n    margin: 10rpx auto;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: flex-start;\r\n\r\n    .btn {\r\n      margin: 30rpx 0\r\n    }\r\n  }\r\n</style>","import MiniProgramPage from 'C:/Users/10459/Desktop/BillV4/BillV4/pages/addBill/addBill.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","uniCloud"],"mappings":";;;;;AAwCE,UAAM,SAAS,CAAC,MAAM,IAAI;AAC1B,UAAM,SAAS;AAAA,MACb,CAAC,MAAM,MAAM;AAAA,MACb,CAAC,MAAM,MAAM,MAAM;AAAA,IACpB;AACD,QAAI,aAAaA,cAAAA,IAAI;AAAA,MACnB,MAAM,CAAC,QAAQ,OAAO,CAAC,CAAC;AAAA,MACxB,WAAW,CAAC,GAAG,CAAC;AAAA,MAChB,OAAO;AAAA,MACP,MAAM,WAAY;AAAA,MAClB,SAAS;AAAA,IACb,CAAG;AACD,QAAI,WAAWC,cAAAA,SAAS,MAAM,WAAW,MAAM,KAAK,CAAC,EAAE,WAAW,MAAM,UAAU,CAAC,CAAC,IAAI,MAAM,WAAW,MAAM,KAAK,CAAC,EAClH,WAAW,MAAM,UAAU,CAAC,CAAC,CAAC;AAEjC,aAAS,aAAa;AACpB,YAAM,MAAM,oBAAI,KAAM;AACtB,YAAM,OAAO,IAAI,YAAa;AAC9B,YAAM,SAAS,IAAI,SAAU,IAAG,GAAG,WAAW,SAAS,GAAG,GAAG;AAC7D,YAAM,MAAM,IAAI,QAAS,EAAC,SAAQ,EAAG,SAAS,GAAG,GAAG;AACpD,aAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG;AAAA,IAC/B;AAED,aAAS,WAAW,GAAG;AACrB,YAAM;AAAA,QACJ,UAAU,CAAC,IAAI,EAAE;AAAA,QACjB;AAAA,QACA;AAAA,QACA;AAAA,MACN,IAAQ,EAAE,OAAO;AACb,YAAM,SAAS,WAAW,MAAM,KAAK,CAAC,EAAE,EAAE;AAC1C,YAAM,SAAS,WAAW,MAAM,KAAK,CAAC,EAAE,EAAE;AAC1C,UAAI,CAAC,UAAU,CAAC,SAAS,CAAC,UAAU;AAClC,eAAOC,cAAAA,MAAI,UAAU;AAAA,UACnB,OAAO;AAAA,UACP,MAAM;AAAA,QACd,CAAO;AAAA,MACF;AAIG,iBAAW;AACf,YAAM,YAAY,WAAW;AAC7BC,oBAAAA,GAAS,aAAa;AAAA,QACpB,MAAM;AAAA,QACN,MAAM;AAAA,UACJ,KAAK;AAAA,UACL;AAAA,UACA;AAAA,UACA,OAAO,YAAY,IAAI,KAAK,KAAK;AAAA,UACjC,MAAM;AAAA,UACN;AAAA,QACD;AAAA,MACP,CAAK,EAAE,KAAK,MAAM;AACZD,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACd,CAAO;AACD,kBAAW;AAAA,MACjB,CAAK;AAAA,IACF;AAED,aAAS,UAAU,GAAG;AACpB,iBAAW,QAAQ;AAAA,QACjB,WAAW,CAAC,GAAG,CAAC;AAAA,QAChB,MAAM,WAAY;AAAA,QAClB,MAAM,CAAC,QAAQ,OAAO,CAAC,CAAC;AAAA,QACxB,OAAO;AAAA,QACP,SAAS;AAAA,MACV;AAAA,IACF;AAED,aAAS,YAAY,GAAG;AACtB,YAAM;AAAA,QACJ,QAAQ;AAAA,QACR,OAAO;AAAA,MACR,IAAG,EAAE;AACN,iBAAW,MAAM,UAAU,GAAG,IAAI;AAClC,UAAI,QAAQ,GAAG;AACb,mBAAW,MAAM,KAAK,CAAC,IAAI,OAAO,GAAG;AACrC,mBAAW,MAAM,UAAU,CAAC,IAAI;AAAA,MACjC;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;ACzHH,GAAG,WAAW,eAAe;"}