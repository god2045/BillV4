{"version":3,"file":"showBill.js","sources":["pages/showBill/showBill.vue","C:/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2hvd0JpbGwvc2hvd0JpbGwudnVl"],"sourcesContent":["<template>\r\n  <view class=\"title\">\r\n    <view class=\"card\">\r\n      <view class=\"card-select\">\r\n        <button type=\"primary\" @click=\"dateBill(dayDate,dayDate)\">今日</button>\r\n        <button type=\"primary\"\r\n          @click=\"dateBill(getCurrentMonthRange().startDate,getCurrentMonthRange().endDate)\">本月</button>\r\n        <button type=\"primary\"\r\n          @click=\"dateBill(getCurrentQuarterRange().startDate,getCurrentQuarterRange().endDate)\">本季度</button>\r\n      </view>\r\n      <scroll-view class=\"sview\" scroll-y=\"true\">\r\n        <view v-for=\"item in billList\" :key=\"item._id\" class=\"bList\">\r\n          <img class=\"icard\" src=\"../../static/logo.png\" />\r\n          <view class=\"icard\">\r\n            <view class=\"icard-type\" :style=\"{color:item.isType}\">{{item.typeLX}}</view>\r\n            <view class=\"icard-date\">{{item.date}}</view>\r\n          </view>\r\n          <view class=\"icard line\">\r\n            <text class=\"icard-b\">{{item.typeLB}}({{item.content}})</text>\r\n          </view>\r\n          <view class=\"icard \">\r\n            <text class=\"icard-money\">{{item.money}}</text>\r\n          </view>\r\n        </view>\r\n      </scroll-view>\r\n    </view>\r\n  </view>\r\n\r\n</template>\r\n\r\n<script setup>\r\n  import {\r\n    onMounted,\r\n    ref\r\n  } from 'vue';\r\n  import {\r\n    onShow\r\n  } from '@dcloudio/uni-app'\r\n  let billList = ref()\r\n\r\n  function formatDate(date) {\r\n    // const now = new Date()\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    return `${year}-${month}-${day}`;\r\n  }\r\n\r\n  function getCurrentMonthRange() {\r\n    const now = new Date();\r\n    const year = now.getFullYear();\r\n    const month = now.getMonth() + 1; // 月份从0开始，所以要+1\r\n    const startDate = new Date(year, month - 1, 1);\r\n    // 获取下个月的第一天，然后减一天得到本月最后一天\r\n    const endDate = new Date(year, month, 0);\r\n    return {\r\n      startDate: formatDate(startDate),\r\n      endDate: formatDate(endDate)\r\n    };\r\n  }\r\n\r\n  function getCurrentQuarterRange() {\r\n    const now = new Date();\r\n    const year = now.getFullYear();\r\n    const month = now.getMonth() + 1; // 月份从0开始，所以要+1\r\n    // 计算季度\r\n    let quarterStartMonth;\r\n    let quarterEndMonth;\r\n    if (month >= 1 && month <= 3) {\r\n      quarterStartMonth = 1;\r\n      quarterEndMonth = 3;\r\n    } else if (month >= 4 && month <= 6) {\r\n      quarterStartMonth = 4;\r\n      quarterEndMonth = 6;\r\n    } else if (month >= 7 && month <= 9) {\r\n      quarterStartMonth = 7;\r\n      quarterEndMonth = 9;\r\n    } else {\r\n      quarterStartMonth = 10;\r\n      quarterEndMonth = 12;\r\n    }\r\n    // 季度开始日期\r\n    const startDate = new Date(year, quarterStartMonth - 1, 1);\r\n    // 季度结束日期（下个季度的第一天减一天）\r\n    const endDate = new Date(year, quarterEndMonth, 0);\r\n    return {\r\n      startDate: formatDate(startDate),\r\n      endDate: formatDate(endDate)\r\n    };\r\n  }\r\n\r\n\r\n\r\n  let dayDate = ref(formatDate(new Date()))\r\n\r\n  // function dateSelect()\r\n\r\n  function dateBill(startDate, endDate) {\r\n    console.log(startDate)\r\n    console.log(endDate)\r\n    uniCloud.callFunction({\r\n      name: \"fun\",\r\n      data: {\r\n        api: \"showBill\",\r\n        startDate,\r\n        endDate\r\n      }\r\n    }).then(res => {\r\n      console.log(res)\r\n      const result = res.result\r\n      billList.value = result.data\r\n      billList.value.map(item => item['isType'] = item.typeLX === '支出' ? 'red' : 'green')\r\n    })\r\n  }\r\n\r\n  onShow(() => {\r\n    dateBill(dayDate.value, dayDate.value)\r\n  })\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .title {\r\n    background-color: rgba(241, 255, 243, 1);\r\n    height: 100vh;\r\n\r\n    .card {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      height: 100%;\r\n\r\n      .card-select {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        width: 92%;\r\n        margin-top: 10%;\r\n      }\r\n\r\n      .sview {\r\n        height: 75vh;\r\n        margin-top: 30rpx;\r\n        width: 80vw;\r\n        border: 1.77rpx solid rgba(0, 98, 144, 1.0);\r\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\r\n      }\r\n\r\n      .bList {\r\n        margin: 21rpx;\r\n        // border: 1px solid #ccc;\r\n        width: 624rpx;\r\n        height: 92.44rpx;\r\n\r\n        display: flex;\r\n        align-items: center;\r\n\r\n        .icard {\r\n          width: 20%;\r\n          // height: 61.9rpx;\r\n          height: 100%;\r\n          padding: 5rpx 10rpx;\r\n          display: flex;\r\n          flex-direction: column;\r\n          justify-content: center;\r\n\r\n          .icard-date {\r\n            font-size: 20.93rpx;\r\n            font-weight: 600;\r\n            letter-spacing: 0rpx;\r\n            line-height: 29.3rpx;\r\n            color: rgba(0, 104, 255, 1);\r\n            text-align: left;\r\n            vertical-align: middle;\r\n            font-family: \"Poppins\", sans-serif;\r\n          }\r\n\r\n          .icard-type {\r\n            height: 61.9rpx;\r\n            font-size: 26.16rpx;\r\n            font-weight: 500;\r\n            letter-spacing: 0rpx;\r\n            line-height: 36.63rpx;\r\n            color: rgba(5, 34, 36, 1);\r\n            text-align: left;\r\n            vertical-align: middle;\r\n          }\r\n\r\n          .icard-b {\r\n            text-overflow: ellipsis;\r\n            display: -webkit-box;\r\n            -webkit-box-orient: vertical;\r\n            -webkit-line-clamp: 3;\r\n            /* 显示行数 */\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            overflow: hidden;\r\n            font-size: 22.67rpx;\r\n            font-weight: 300;\r\n            letter-spacing: 0rpx;\r\n            line-height: 26.16rpx;\r\n            color: rgba(5, 34, 36, 1);\r\n            text-align: center;\r\n            vertical-align: middle;\r\n          }\r\n\r\n          .icard-money {\r\n            font-size: 26.16rpx;\r\n            font-weight: 500;\r\n            letter-spacing: 0rpx;\r\n            line-height: 92.44rpx;\r\n            color: rgba(5, 34, 36, 1);\r\n            text-align: center;\r\n            vertical-align: middle;\r\n          }\r\n        }\r\n\r\n        .line {\r\n          border-left: 1.77rpx solid rgba(0, 208, 158, 1);\r\n          border-right: 1.77rpx solid rgba(0, 208, 158, 1);\r\n        }\r\n\r\n\r\n      }\r\n    }\r\n  }\r\n</style>","import MiniProgramPage from 'D:/BillV4/BillV4/pages/showBill/showBill.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","uniCloud","onShow"],"mappings":";;;;;;AAsCE,QAAI,WAAWA,cAAAA,IAAK;AAEpB,aAAS,WAAW,MAAM;AAExB,YAAM,OAAO,KAAK;AAClB,YAAM,QAAQ,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,YAAM,MAAM,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAClD,aAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG;AAAA,IAC/B;AAED,aAAS,uBAAuB;AAC9B,YAAM,MAAM,oBAAI;AAChB,YAAM,OAAO,IAAI;AACjB,YAAM,QAAQ,IAAI,SAAQ,IAAK;AAC/B,YAAM,YAAY,IAAI,KAAK,MAAM,QAAQ,GAAG,CAAC;AAE7C,YAAM,UAAU,IAAI,KAAK,MAAM,OAAO,CAAC;AACvC,aAAO;AAAA,QACL,WAAW,WAAW,SAAS;AAAA,QAC/B,SAAS,WAAW,OAAO;AAAA,MACjC;AAAA,IACG;AAED,aAAS,yBAAyB;AAChC,YAAM,MAAM,oBAAI;AAChB,YAAM,OAAO,IAAI;AACjB,YAAM,QAAQ,IAAI,SAAQ,IAAK;AAE/B,UAAI;AACJ,UAAI;AACJ,UAAI,SAAS,KAAK,SAAS,GAAG;AAC5B,4BAAoB;AACpB,0BAAkB;AAAA,MACnB,WAAU,SAAS,KAAK,SAAS,GAAG;AACnC,4BAAoB;AACpB,0BAAkB;AAAA,MACnB,WAAU,SAAS,KAAK,SAAS,GAAG;AACnC,4BAAoB;AACpB,0BAAkB;AAAA,MACxB,OAAW;AACL,4BAAoB;AACpB,0BAAkB;AAAA,MACnB;AAED,YAAM,YAAY,IAAI,KAAK,MAAM,oBAAoB,GAAG,CAAC;AAEzD,YAAM,UAAU,IAAI,KAAK,MAAM,iBAAiB,CAAC;AACjD,aAAO;AAAA,QACL,WAAW,WAAW,SAAS;AAAA,QAC/B,SAAS,WAAW,OAAO;AAAA,MACjC;AAAA,IACG;AAID,QAAI,UAAUA,cAAG,IAAC,WAAW,oBAAI,KAAM,CAAA,CAAC;AAIxC,aAAS,SAAS,WAAW,SAAS;AACpCC,oBAAAA,MAAA,MAAA,OAAA,qCAAY,SAAS;AACrBA,oBAAAA,MAAA,MAAA,OAAA,sCAAY,OAAO;AACnBC,oBAAAA,GAAS,aAAa;AAAA,QACpB,MAAM;AAAA,QACN,MAAM;AAAA,UACJ,KAAK;AAAA,UACL;AAAA,UACA;AAAA,QACD;AAAA,MACP,CAAK,EAAE,KAAK,SAAO;AACbD,sBAAAA,yDAAY,GAAG;AACf,cAAM,SAAS,IAAI;AACnB,iBAAS,QAAQ,OAAO;AACxB,iBAAS,MAAM,IAAI,UAAQ,KAAK,QAAQ,IAAI,KAAK,WAAW,OAAO,QAAQ,OAAO;AAAA,MACxF,CAAK;AAAA,IACF;AAEDE,kBAAAA,OAAO,MAAM;AACX,eAAS,QAAQ,OAAO,QAAQ,KAAK;AAAA,IACzC,CAAG;;;;;;;;;;;;;;;;;;;;;;;ACpHH,GAAG,WAAW,eAAe;"}